<?xml version="1.0" encoding="utf-8" ?>
<ConfigModel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema">

  <ServiceNounPrefix>KMS</ServiceNounPrefix>
  <ServiceNamespace>Amazon.KeyManagementService</ServiceNamespace>
  <ServiceClientInterface>IAmazonKeyManagementService</ServiceClientInterface>
  <ServiceClient>AmazonKeyManagementServiceClient</ServiceClient>

  <AutoIterate EmitLimit="Limit" Start="Marker" Next="NextMarker" TruncatedFlag="Truncated" />
  <MetadataProperties>
    <Property>NextMarker</Property>
    <Property>Truncated</Property>
  </MetadataProperties>

  <ServiceOperations>

    <ServiceOperation MethodName="CreateAlias" Output="Void" PipelineParameter="TargetKeyId"/>
    <ServiceOperation MethodName="DeleteAlias" Output="Void" />
    <ServiceOperation MethodName="ListAliases" />
    <ServiceOperation MethodName="UpdateAlias" Output="Void"  PipelineParameter="TargetKeyId"/>

    <ServiceOperation MethodName="CreateGrant" Output="Response" NoPipelineParameter="true"/>
    <ServiceOperation MethodName="ListGrants" />
    <ServiceOperation MethodName="RetireGrant" Output="Void" Verb="Disable" NoPipelineParameter="true" ShouldProcessTarget="GrantToken"/>
    <ServiceOperation MethodName="RevokeGrant" Output="Void" PipelineParameter="KeyId" ShouldProcessTarget="GrantToken" />
    
    <ServiceOperation MethodName="CreateKey" AnonymousShouldProcessTarget="true" NoPipelineParameter="true"/>
    <ServiceOperation MethodName="DescribeKey" />
    <ServiceOperation MethodName="DisableKey" Output="Void" />
    <ServiceOperation MethodName="EnableKey" Output="Void" />
    <ServiceOperation MethodName="UpdateKeyDescription" Output="Void" PipelineParameter="KeyId"/>
    <ServiceOperation MethodName="ListKeys" />
    
    <ServiceOperation MethodName="GetKeyPolicy" PipelineParameter="KeyId" />
    <ServiceOperation MethodName="ListKeyPolicies" />
    <ServiceOperation MethodName="PutKeyPolicy" Output="Void" PipelineParameter="KeyId"/>

    <ServiceOperation MethodName="DisableKeyRotation" Output="Void" />
    <ServiceOperation MethodName="EnableKeyRotation" Output="Void" />
    <ServiceOperation MethodName="GetKeyRotationStatus" />

    <ServiceOperation MethodName="Decrypt" Verb="Invoke" Noun="Decrypt" Output="Response" IgnoreSupportsShouldProcess="true" NoPipelineParameter="true"/>
    <ServiceOperation MethodName="Encrypt" Verb="Invoke" Noun="Encrypt" Output="Response" PipelineParameter="KeyId" />
    <ServiceOperation MethodName="ReEncrypt" Verb="Invoke" Noun="ReEncrypt" Output="Response" NoPipelineParameter="true"/>
    
    <ServiceOperation MethodName="GenerateDataKey" Output="Response" AnonymousShouldProcessTarget="true" PipelineParameter="KeyId" >
      <Params>
        <!-- stops rename thru singularization -->
        <Param Name="NumberOfBytes" AutoRename="false" />
      </Params>
    </ServiceOperation>

    <ServiceOperation MethodName="GenerateDataKeyWithoutPlaintext" Output="Response" PipelineParameter="KeyId" >
      <Params>
        <!-- stops rename thru singularization -->
        <Param Name="NumberOfBytes" AutoRename="false" />
      </Params>
    </ServiceOperation>

    <ServiceOperation MethodName="GenerateRandom" AnonymousShouldProcessTarget="true">
      <Params>
        <!-- stops rename thru singularization -->
        <Param Name="NumberOfBytes" AutoRename="false" />
      </Params>
    </ServiceOperation>
  </ServiceOperations>
  
  <VerbMappings>
    <Map From="Generate" To="New" />
    <Map From="List" To="Get" />
  </VerbMappings>

</ConfigModel>