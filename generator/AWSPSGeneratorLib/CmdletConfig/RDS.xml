<?xml version="1.0" encoding="utf-8" ?>
<ConfigModel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ServiceNounPrefix>RDS</ServiceNounPrefix>
  <ServiceClientInterface>IAmazonRDS</ServiceClientInterface>
  <ServiceClient>AmazonRDSClient</ServiceClient>
  <ServiceNamespace>Amazon.RDS</ServiceNamespace>

  <VerbMappings>
    <Map From="List" To="Get" />
    <Map From="Reboot" To="Restart" />
    <Map From="Download" To="Get" />
  </VerbMappings>

  <NounMappings>
    <Map From="DBEngineVersions" To="DBEngineVersion" />
    <Map From="DBInstances" To="DBInstance" />
    <Map From="DBParameterGroups" To="DBParameterGroup" />
    <Map From="DBParameters" To="DBParameter" />
    <Map From="DBSecurityGroups" To="DBSecurityGroup" />
    <Map From="DBSnapshots" To="DBSnapshot" />
    <Map From="DBSubnetGroups" To="DBSubnetGroup" />
    <Map From="EngineDefaultParameters" To="EngineDefaultParameter" />
    <Map From="Events" To="Event" />
    <Map From="OptionGroupOptions" To="OptionGroupOption" />
    <Map From="OptionGroups" To="OptionGroup" />
    <Map From="OrderableDBInstanceOptions" To="OrderableDBInstanceOption" />
    <Map From="ReservedDBInstances" To="ReservedDBInstance" />
    <Map From="TagsForResource" To="TagForResource" />
    <Map From="TagsFromResource" To="TagFromResource" />
  </NounMappings>

  <AutoIterate EmitLimit="MaxRecords" Start="Marker" Next="Marker" />

  <PositionalParameters>DBInstanceIdentifier</PositionalParameters>
  <PipelineParameter>DBInstanceIdentifier</PipelineParameter>

  <ServiceOperations>
    <ServiceOperation MethodName="AddSourceIdentifierToSubscription" PipelineParameter="SubscriptionName" PositionalParameters="SourceIdentifier"/>
    <ServiceOperation MethodName="AddTagsToResource" Output="Void" PipelineParameter="ResourceName" PositionalParameters="Tags">
      <PassThru>
        <Expression>cmdletContext.Tags</Expression>
        <Documentation>Returns the collection of tags that were added</Documentation>
      </PassThru>
    </ServiceOperation>
    <ServiceOperation MethodName="ApplyPendingMaintenanceAction" PipelineParameter="ResourceIdentifier" Verb="Submit"/>
    <ServiceOperation MethodName="AuthorizeDBSecurityGroupIngress" Verb="Enable" Noun="DBSecurityGroupIngress"
                       PipelineParameter="DBSecurityGroupName" PositionalParameters="CIDRIP"/>
    <ServiceOperation MethodName="CopyDBParameterGroup" PipelineParameter="SourceDBParameterGroupIdentifier" PositionalParameters="TargetDBParameterGroupIdentifier;TargetDBParameterGroupDescription"/>
    <ServiceOperation MethodName="CopyDBSnapshot" PipelineParameter="SourceDBSnapshotIdentifier" PositionalParameters="TargetDBSnapshotIdentifier"/>
    <ServiceOperation MethodName="CopyOptionGroup" PipelineParameter="SourceOptionGroupIdentifier" PositionalParameters="TargetOptionGroupIdentifier;TargetOptionGroupDescription"/>
    <ServiceOperation MethodName="CreateDBInstance" PipelineParameter="DBName" PositionalParameters="DBInstanceIdentifier"/>
    <ServiceOperation MethodName="CreateDBInstanceReadReplica" PositionalParameters="SourceDBInstanceIdentifier" ShouldProcessTarget="DBInstanceIdentifier"/>
    <ServiceOperation MethodName="CreateDBParameterGroup"
                       PipelineParameter="DBParameterGroupName" PositionalParameters="Description"/>
    <ServiceOperation MethodName="CreateDBSecurityGroup"
                       PipelineParameter="DBSecurityGroupName" PositionalParameters="DBSecurityGroupDescription"/>
    <ServiceOperation MethodName="CreateDBSnapshot"
                       PipelineParameter="DBSnapshotIdentifier" PositionalParameters="DBInstanceIdentifier"/>
    <ServiceOperation MethodName="CreateDBSubnetGroup"
                       PipelineParameter="DBSubnetGroupName" PositionalParameters="DBSubnetGroupDescription;SubnetIds"/>
    <ServiceOperation MethodName="CreateEventSubscription"
                       PipelineParameter="SubscriptionName" PositionalParameters="SnsTopicArn;SourceType"/>
    <ServiceOperation MethodName="CreateOptionGroup"
                       PipelineParameter="OptionGroupName" PositionalParameters="EngineName;MajorEngineVersion;OptionGroupDescription"/>
    <ServiceOperation MethodName="DeleteDBInstance" ShouldProcessTarget="DBInstanceIdentifier"/>
    <ServiceOperation MethodName="DeleteDBParameterGroup" Output="Void"/>
    <ServiceOperation MethodName="DeleteDBSecurityGroup" Output="Void" />
    <ServiceOperation MethodName="DeleteDBSnapshot"/>
    <ServiceOperation MethodName="DeleteDBSubnetGroup" Output="Void"/>
    <ServiceOperation MethodName="DeleteEventSubscription"/>
    <ServiceOperation MethodName="DeleteOptionGroup" Output="Void" />
    <ServiceOperation MethodName="DescribeAccountAttributes"/>
    <ServiceOperation MethodName="DescribeCertificates"/>
    <ServiceOperation MethodName="DescribeDBEngineVersions" PipelineParameter="Engine" PositionalParameters="EngineVersion;DBParameterGroupFamily"/>
    <ServiceOperation MethodName="DescribeDBInstances"/>
    <ServiceOperation MethodName="DescribeDBLogFiles">
      <Params>
        <Param Name="FilenameContains" AutoRename="false" />
      </Params>
    </ServiceOperation>
    <ServiceOperation MethodName="DownloadDBLogFilePortion" Output="Response" PositionalParameters="LogFileName">
      <Params>
        <!-- stops rename thru singularization -->
        <Param Name="NumberOfLines" AutoRename="false" />
      </Params>
    </ServiceOperation>

    <ServiceOperation MethodName="DescribeDBParameterGroups" PipelineParameter="DBParameterGroupName"/>
    <ServiceOperation MethodName="DescribeDBParameters" PipelineParameter="DBParameterGroupName" PositionalParameters="Source"/>
    <ServiceOperation MethodName="DescribeDBSecurityGroups" PipelineParameter="DBSecurityGroupName"/>
    <ServiceOperation MethodName="DescribeDBSnapshots" PositionalParameters="DBSnapshotIdentifier;SnapshotType"/>
    <ServiceOperation MethodName="DescribeDBSnapshotAttributes"/>
    <ServiceOperation MethodName="DescribeDBSubnetGroups" PipelineParameter="DBSubnetGroupName"/>
    <ServiceOperation MethodName="DescribeEngineDefaultParameters" PipelineParameter="DBParameterGroupFamily"/>
    <ServiceOperation MethodName="DescribeEventCategories" PipelineParameter="SourceType"/>
    <ServiceOperation MethodName="DescribeEvents" PipelineParameter="SourceIdentifier" PositionalParameters="SourceType"/>
    <ServiceOperation MethodName="DescribeEventSubscriptions" PipelineParameter="SubscriptionName"/>
    <ServiceOperation MethodName="DescribeOptionGroupOptions" PipelineParameter="EngineName" PositionalParameters="MajorEngineVersion"/>
    <ServiceOperation MethodName="DescribeOptionGroups" PipelineParameter="OptionGroupName"/>
    <ServiceOperation MethodName="DescribeOrderableDBInstanceOptions" PipelineParameter="Engine"/>
    <ServiceOperation MethodName="DescribeReservedDBInstances" PipelineParameter="ReservedDBInstanceId"/>
    <ServiceOperation MethodName="DescribePendingMaintenanceActions" PipelineParameter="ResourceIdentifier"/>
    <ServiceOperation MethodName="DescribeReservedDBInstancesOfferings" PipelineParameter="ReservedDBInstancesOfferingId"/>
    <ServiceOperation MethodName="ListTagsForResource" PipelineParameter="ResourceName"/>
    <ServiceOperation MethodName="ModifyDBInstance" ShouldProcessTarget="DBInstanceIdentifier"/>
    <ServiceOperation MethodName="ModifyDBParameterGroup" PipelineParameter="DBParameterGroupName" PositionalParameters="Parameters"/>
    <ServiceOperation MethodName="ModifyDBSnapshotAttribute" PipelineParameter="DBSnapshotIdentifier"/>
    <ServiceOperation MethodName="ModifyDBSubnetGroup" PipelineParameter="DBSubnetGroupName" PositionalParameters="DBSubnetGroupDescription;SubnetIds"/>
    <ServiceOperation MethodName="ModifyEventSubscription" PipelineParameter="SubscriptionName" PositionalParameters="SnsTopicArn"/>
    <ServiceOperation MethodName="ModifyOptionGroup" PipelineParameter="OptionGroupName" PositionalParameters="ApplyImmediately"/>
    <ServiceOperation MethodName="PromoteReadReplica" Verb="Convert" Noun="ReadReplicaToStandalone"/>
    <ServiceOperation MethodName="PurchaseReservedDBInstancesOffering" Verb="Get" Noun="ReservedDBInstancesOffering"
                       PipelineParameter="ReservedDBInstancesOfferingId"/>
    <ServiceOperation MethodName="RebootDBInstance"/>
    <!-- do we need shouldprocess here? -->
    <ServiceOperation MethodName="RemoveSourceIdentifierFromSubscription" ShouldProcessTarget="SourceIdentifier"
                      PipelineParameter="SubscriptionName" PositionalParameters="SourceIdentifier"/>
    <!-- do we need shouldprocess here? this is [] type-->
    <ServiceOperation MethodName="RemoveTagsFromResource" Output="Void" ShouldProcessTarget="TagKeys"
                      PipelineParameter="ResourceName" PositionalParameters="TagKeys">
      <PassThru>
        <Expression>cmdletContext.TagKeys</Expression>
        <Documentation>Returns the collection of tag keys that were removed</Documentation>
      </PassThru>
    </ServiceOperation>
    <ServiceOperation MethodName="ResetDBParameterGroup"
                      PipelineParameter="DBParameterGroupName"/>
    <ServiceOperation MethodName="RestoreDBInstanceFromDBSnapshot"
                      PositionalParameters="DBSnapshotIdentifier" ShouldProcessTarget="DBInstanceIdentifier"/>
    <ServiceOperation MethodName="RestoreDBInstanceToPointInTime"
                      PipelineParameter="SourceDBInstanceIdentifier" PositionalParameters="TargetDBInstanceIdentifier" ShouldProcessTarget="SourceDBInstanceIdentifier"/>
    <ServiceOperation MethodName="RevokeDBSecurityGroupIngress"
                      PipelineParameter="DBSecurityGroupName" PositionalParameters="CIDRIP"/>

    <!-- Aurora APIs -->

    <ServiceOperation MethodName="FailoverDBCluster" Verb="Start" Noun="DBClusterFailover" />
    <ServiceOperation MethodName="ModifyDBCluster" ShouldProcessTarget="DBClusterIdentifier"	/>

    <ServiceOperation MethodName="ModifyDBClusterParameterGroup"
      PipelineParamater="DBClusterParameterGroupName"
      PositionalParameters="Parameters"/>

    <ServiceOperation MethodName="ResetDBClusterParameterGroup"
      PipelineParamater="DBClusterParameterGroupName"
      PositionalParameters="Parameters"/> />

    <ServiceOperation MethodName="RestoreDBClusterFromSnapshot"
      PipelineParameter="DBClusterIdentifier"
      ShouldProcessTarget="DBClusterIdentifier" />

    <ServiceOperation MethodName="RestoreDBClusterToPointInTime"
      PipelineParameter="DBClusterIdentifier"
      ShouldProcessTarget="DBClusterIdentifier" />

    <ServiceOperation MethodName="DescribeDBClusterParameterGroups" PipelineParameter="DBClusterParameterGroupName"/>
    <ServiceOperation MethodName="DescribeDBClusterParameters" PipelineParameter="DBClusterParameterGroupName" />
    <ServiceOperation MethodName="DescribeDBClusters" />
    <ServiceOperation MethodName="DescribeDBClusterSnapshots" />
    <ServiceOperation MethodName="DescribeEngineDefaultClusterParameters" />

    <ServiceOperation MethodName="CopyDBClusterSnapshot"
      PipelineParameter="SourceDBClusterSnapshotIdentifier"
      PositionalParameters="TargetDBClusterSnapshotIdentifier" />

    <ServiceOperation MethodName="CreateDBCluster"
      PipelineParameter="DBClusterIdentifier"
      ShouldProcessTarget="DBClusterIdentifier"/>

    <ServiceOperation MethodName="CreateDBClusterParameterGroup" PipelineParameter="DBClusterParameterGroupName" />

    <ServiceOperation MethodName="CreateDBClusterSnapshot"
      PipelineParameter="DBClusterIdentifier"
      PositionalParameter="DBClusterSnapshotIdentifier"/>

    <ServiceOperation MethodName="DeleteDBCluster" ShouldProcessTarget="DBClusterIdentifier"/>
    <ServiceOperation MethodName="DeleteDBClusterParameterGroup"
      Output="Void"
      ShouldProcessTarget="DBClusterParameterGroupName"/>

    <ServiceOperation MethodName="DeleteDBClusterSnapshot" ShouldProcessTarget="DBClusterSnapshotIdentifier"/>


  </ServiceOperations>

  <NounMappings>
    <Map From="DBClusterParameterGroups" To="DBClusterParameterGroup" />
    <Map From="DBClusterParameters" To="DBClusterParameter" />
    <Map From="DBClusters" To="DBCluster" />
    <Map From="DBClusterSnapshots" To="DBClusterSnapshot" />
    <Map From="EngineDefaultClusterParameters" To="EngineDefaultClusterParameter" />
  </NounMappings>

  <PipelineByValueProperties>
    <Property>DBSecurityGroupName</Property>
    <Property>EC2SecurityGroupName</Property>
    <Property>EC2SecurityGroupId</Property>
    <Property>EC2SecurityGroupOwnerId</Property>
    <Property>DBInstanceIdentifier</Property>
    <Property>DBParameterGroupName</Property>
    <Property>DBSnapshotIdentifier</Property>
    <Property>DBSubnetGroupName</Property>
    <Property>SubscriptionName</Property>
    <Property>OptionGroupName</Property>
    <Property>Engine</Property>
    <Property>EngineName</Property>
    <Property>EngineVersion</Property>
    <Property>DBInstanceClass</Property>
    <Property>ReservedDBInstancesOfferingId</Property>
    <Property>ReservedDBInstanceId</Property>
    <Property>ResourceName</Property>
    <Property>SnsTopicArn</Property>
    <Property>SourceIdentifier</Property>
    <Property>CIDRIP</Property>
  </PipelineByValueProperties>

</ConfigModel>
